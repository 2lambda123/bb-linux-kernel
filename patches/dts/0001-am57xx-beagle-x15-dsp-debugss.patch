From f6727b6f6c367ca848ff5d93cabf8a31fa9df2ce Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 27 Oct 2015 19:12:57 -0500
Subject: [PATCH] am57xx-beagle-x15: dsp debugss

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am57xx-beagle-x15.dts | 21 ++++++++++++++++++++-
 arch/arm/boot/dts/dra74x.dtsi           |  6 ++++++
 2 files changed, 26 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/am57xx-beagle-x15.dts b/arch/arm/boot/dts/am57xx-beagle-x15.dts
index a5ec2f3..a030286 100644
--- a/arch/arm/boot/dts/am57xx-beagle-x15.dts
+++ b/arch/arm/boot/dts/am57xx-beagle-x15.dts
@@ -58,10 +58,16 @@
 
 		dsp2_cma_pool: dsp2_cma@9f000000 {
 			compatible = "shared-dma-pool";
-			reg = <0x0 0x9f000000 0x0 0x800000>;
+			reg = <0x0 0x9f000000 0x0 0x1000000>;
 			reusable;
 			status = "okay";
 		};
+
+		cmem_block_mem_0: cmem_block_mem@a0000000 {
+			reg = <0x0 0xa0000000 0x0 0xa000000>;
+			no-map;
+			status = "okay";
+		};
 	};
 
 	vdd_3v3: fixedregulator-vdd_3v3 {
@@ -205,6 +211,19 @@
 			clocks = <&clkout2_clk>;
 		};
 	};
+
+	cmem {
+		compatible = "ti,cmem";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		status = "okay";
+
+		cmem_block_0: cmem_block@0 {
+			reg = <0>;
+			memory-region = <&cmem_block_mem_0>;
+			cmem-buf-pools = <0x1 0xa000000>;
+		};
+	};
 };
 
 &dra7_pmx_core {
diff --git a/arch/arm/boot/dts/dra74x.dtsi b/arch/arm/boot/dts/dra74x.dtsi
index a2ea85b..224edfd 100644
--- a/arch/arm/boot/dts/dra74x.dtsi
+++ b/arch/arm/boot/dts/dra74x.dtsi
@@ -58,6 +58,12 @@
 	};
 
 	ocp {
+		debugss {
+			compatible = "ti,dra7xx-debugss";
+			clocks = <0xe>;
+			clock-names = "sysclockin1";
+		};
+
 		dsp2_system: dsp_system@41500000 {
 			compatible = "syscon";
 			reg = <0x41500000 0x100>;
-- 
2.6.1

