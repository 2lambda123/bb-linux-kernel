From ac82266fc2f8d70a4c3bfc242018634305daeef9 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Wed, 3 Apr 2019 13:38:39 -0500
Subject: [PATCH 2/2] am335x-* add spidev symlink

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-boneblack-bbbmini.dts         | 3 +++
 arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts        | 2 ++
 arch/arm/boot/dts/am335x-boneblue-mmap.dts             | 2 ++
 arch/arm/boot/dts/am335x-boneblue.dts                  | 2 ++
 arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts | 2 ++
 arch/arm/boot/dts/am335x-pocketbeagle.dts              | 4 ++++
 arch/arm/boot/dts/am335x-roboticscape.dtsi             | 4 +++-
 7 files changed, 18 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
index 5ed89a2b113c..9544ddf0ab3e 100644
--- a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
+++ b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
@@ -157,6 +157,7 @@
 		spi-max-frequency = <24000000>;
 		reg = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 	};
 };
 
@@ -171,6 +172,7 @@
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 	};
 
 	spi1_1 {
@@ -179,6 +181,7 @@
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 	};
 };
 
diff --git a/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts b/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
index 17cb5fa333b9..e574b72fe234 100644
--- a/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
+++ b/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
@@ -467,6 +467,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -475,6 +476,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-boneblue-mmap.dts b/arch/arm/boot/dts/am335x-boneblue-mmap.dts
index 9834e50718fa..b095e960ba47 100644
--- a/arch/arm/boot/dts/am335x-boneblue-mmap.dts
+++ b/arch/arm/boot/dts/am335x-boneblue-mmap.dts
@@ -570,6 +570,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -578,6 +579,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-boneblue.dts b/arch/arm/boot/dts/am335x-boneblue.dts
index c351fbe0e4c8..e76fe6015da9 100644
--- a/arch/arm/boot/dts/am335x-boneblue.dts
+++ b/arch/arm/boot/dts/am335x-boneblue.dts
@@ -466,6 +466,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -474,6 +475,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts b/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
index 463cb6a5a35a..c5bdf0a250eb 100644
--- a/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
+++ b/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
@@ -39,6 +39,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 		status = "disabled";
@@ -48,6 +49,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-pocketbeagle.dts b/arch/arm/boot/dts/am335x-pocketbeagle.dts
index d2aaf43f99ba..389d96d8ed15 100644
--- a/arch/arm/boot/dts/am335x-pocketbeagle.dts
+++ b/arch/arm/boot/dts/am335x-pocketbeagle.dts
@@ -19,6 +19,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -27,6 +28,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		status = "disabled";
@@ -42,6 +44,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -50,6 +53,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-roboticscape.dtsi b/arch/arm/boot/dts/am335x-roboticscape.dtsi
index 0036f4f3b658..5403e098a5d9 100644
--- a/arch/arm/boot/dts/am335x-roboticscape.dtsi
+++ b/arch/arm/boot/dts/am335x-roboticscape.dtsi
@@ -391,6 +391,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -402,6 +403,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
@@ -464,4 +466,4 @@
 		ti,chan-step-opendelay = <0x98 0x98 0x98 0x98 0x98 0x98 0x98 0x98>;
 		ti,chan-step-sampledelay = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
 	};
-};
\ No newline at end of file
+};
-- 
2.20.1

