From bf09b1533730fa6378a74b28f6d0baa086ea6d80 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Wed, 21 Feb 2018 14:54:24 -0600
Subject: [PATCH] am335x-boneblack-uboot: add oppnitro overide and enable sgx

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-boneblack-uboot.dts    | 15 +++++++++++++++
 arch/arm/boot/dts/am335x-sancloud-bbe-uboot.dts |  4 ++++
 2 files changed, 19 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-boneblack-uboot.dts b/arch/arm/boot/dts/am335x-boneblack-uboot.dts
index b2f6e36d6bff..a3f43325e27b 100644
--- a/arch/arm/boot/dts/am335x-boneblack-uboot.dts
+++ b/arch/arm/boot/dts/am335x-boneblack-uboot.dts
@@ -24,3 +24,18 @@
 &mmc1 {
 	vmmc-supply = <&vmmcsd_fixed>;
 };
+
+&cpu0_opp_table {
+	/*
+	 * All PG 2.0 silicon may not support 1GHz but some of the early
+	 * BeagleBone Blacks have PG 2.0 silicon which is guaranteed
+	 * to support 1GHz OPP so enable it for PG 2.0 on this board.
+	 */
+	oppnitro@1000000000 {
+		opp-supported-hw = <0x06 0x0100>;
+	};
+};
+
+&sgx {
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/am335x-sancloud-bbe-uboot.dts b/arch/arm/boot/dts/am335x-sancloud-bbe-uboot.dts
index d4c592d7629d..c8c148b1dfba 100644
--- a/arch/arm/boot/dts/am335x-sancloud-bbe-uboot.dts
+++ b/arch/arm/boot/dts/am335x-sancloud-bbe-uboot.dts
@@ -24,3 +24,7 @@
 &mmc1 {
 	vmmc-supply = <&vmmcsd_fixed>;
 };
+
+&sgx {
+	status = "okay";
+};
-- 
2.16.1

