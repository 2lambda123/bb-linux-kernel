From cdbc95f1db907b29742621a8b2b408d418a66314 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Wed, 3 Apr 2019 12:59:29 -0500
Subject: [PATCH 3/3] am335x-* add spidev symlink

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-boneblack-bbbmini.dts         | 3 +++
 arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts        | 2 ++
 arch/arm/boot/dts/am335x-boneblue-mmap.dts             | 2 ++
 arch/arm/boot/dts/am335x-boneblue.dts                  | 2 ++
 arch/arm/boot/dts/am335x-peripheral-spi0.dtsi          | 2 ++
 arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts | 2 ++
 arch/arm/boot/dts/am335x-pocketbeagle.dts              | 4 ++++
 arch/arm/boot/dts/am335x-roboticscape.dtsi             | 2 ++
 8 files changed, 19 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
index 91cc9045efb0..1372ab5a5cc2 100644
--- a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
+++ b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
@@ -167,6 +167,7 @@
 		spi-max-frequency = <24000000>;
 		reg = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 	};
 };
 
@@ -181,6 +182,7 @@
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 	};
 
 	spi1_1 {
@@ -189,6 +191,7 @@
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 	};
 };
 
diff --git a/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts b/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
index d01480630f30..e42bd1c93408 100644
--- a/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
+++ b/arch/arm/boot/dts/am335x-boneblue-ArduPilot.dts
@@ -597,6 +597,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -605,6 +606,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-boneblue-mmap.dts b/arch/arm/boot/dts/am335x-boneblue-mmap.dts
index 92ed7bf57ac2..5655fbd57c67 100644
--- a/arch/arm/boot/dts/am335x-boneblue-mmap.dts
+++ b/arch/arm/boot/dts/am335x-boneblue-mmap.dts
@@ -571,6 +571,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -579,6 +580,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-boneblue.dts b/arch/arm/boot/dts/am335x-boneblue.dts
index 8b8c4d5906c6..6ec567ee1128 100644
--- a/arch/arm/boot/dts/am335x-boneblue.dts
+++ b/arch/arm/boot/dts/am335x-boneblue.dts
@@ -467,6 +467,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -475,6 +476,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-peripheral-spi0.dtsi b/arch/arm/boot/dts/am335x-peripheral-spi0.dtsi
index 80dddfbf8b89..684f08de7972 100644
--- a/arch/arm/boot/dts/am335x-peripheral-spi0.dtsi
+++ b/arch/arm/boot/dts/am335x-peripheral-spi0.dtsi
@@ -13,6 +13,7 @@
 
 	channel@0 {
 		compatible = "spidev";
+		symlink = "spi/0.0";
 		spi-max-frequency = <16000000>;
 		reg = <0>;
 		spi-cpha;
@@ -20,6 +21,7 @@
 
 	channel@1 {
 		compatible = "spidev";
+		symlink = "spi/0.1";
 		spi-max-frequency = <16000000>;
 		reg = <1>;
 	};
diff --git a/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts b/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
index 463cb6a5a35a..c5bdf0a250eb 100644
--- a/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
+++ b/arch/arm/boot/dts/am335x-pocketbeagle-simplegaming.dts
@@ -39,6 +39,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 		status = "disabled";
@@ -48,6 +49,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-pocketbeagle.dts b/arch/arm/boot/dts/am335x-pocketbeagle.dts
index d2aaf43f99ba..389d96d8ed15 100644
--- a/arch/arm/boot/dts/am335x-pocketbeagle.dts
+++ b/arch/arm/boot/dts/am335x-pocketbeagle.dts
@@ -19,6 +19,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -27,6 +28,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		status = "disabled";
@@ -42,6 +44,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -50,6 +53,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-roboticscape.dtsi b/arch/arm/boot/dts/am335x-roboticscape.dtsi
index 77d815a3af5f..78ff58fdb719 100644
--- a/arch/arm/boot/dts/am335x-roboticscape.dtsi
+++ b/arch/arm/boot/dts/am335x-roboticscape.dtsi
@@ -377,6 +377,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -388,6 +389,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
-- 
2.20.1

