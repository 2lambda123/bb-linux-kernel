From 2df0ddbbb7267b5b7ca1faa37944cce28345655c Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Thu, 4 Apr 2019 12:03:50 -0500
Subject: [PATCH] am335x-* add spidev symlink

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-bone-common-univ.dtsi               | 4 ++++
 arch/arm/boot/dts/am335x-boneblack-bbbmini.dts               | 3 +++
 arch/arm/boot/dts/am335x-boneblue.dts                        | 2 ++
 arch/arm/boot/dts/am335x-bonegreen-wireless-common-univ.dtsi | 4 ++++
 arch/arm/boot/dts/am335x-pocketbeagle.dts                    | 4 ++++
 arch/arm/boot/dts/am335x-roboticscape.dtsi                   | 2 ++
 6 files changed, 19 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-bone-common-univ.dtsi b/arch/arm/boot/dts/am335x-bone-common-univ.dtsi
index cdc9a971f717..037683957292 100644
--- a/arch/arm/boot/dts/am335x-bone-common-univ.dtsi
+++ b/arch/arm/boot/dts/am335x-bone-common-univ.dtsi
@@ -1340,6 +1340,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/0.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -1351,6 +1352,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/0.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
@@ -1367,6 +1369,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -1378,6 +1381,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
diff --git a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
index a2245501a5bd..34c1f17283f3 100644
--- a/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
+++ b/arch/arm/boot/dts/am335x-boneblack-bbbmini.dts
@@ -156,6 +156,7 @@
 		spi-max-frequency = <24000000>;
 		reg = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 	};
 };
 
@@ -170,6 +171,7 @@
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 	};
 
 	spi1@1 {
@@ -178,6 +180,7 @@
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 	};
 };
 
diff --git a/arch/arm/boot/dts/am335x-boneblue.dts b/arch/arm/boot/dts/am335x-boneblue.dts
index 52e27b75f571..882bf467c6c2 100644
--- a/arch/arm/boot/dts/am335x-boneblue.dts
+++ b/arch/arm/boot/dts/am335x-boneblue.dts
@@ -1049,6 +1049,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -1057,6 +1058,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-bonegreen-wireless-common-univ.dtsi b/arch/arm/boot/dts/am335x-bonegreen-wireless-common-univ.dtsi
index ae2f79a78c3f..455a8fa5f68b 100644
--- a/arch/arm/boot/dts/am335x-bonegreen-wireless-common-univ.dtsi
+++ b/arch/arm/boot/dts/am335x-bonegreen-wireless-common-univ.dtsi
@@ -1288,6 +1288,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/0.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -1299,6 +1300,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/0.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
@@ -1315,6 +1317,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -1326,6 +1329,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
diff --git a/arch/arm/boot/dts/am335x-pocketbeagle.dts b/arch/arm/boot/dts/am335x-pocketbeagle.dts
index 0cd23505fbca..19325219fa87 100644
--- a/arch/arm/boot/dts/am335x-pocketbeagle.dts
+++ b/arch/arm/boot/dts/am335x-pocketbeagle.dts
@@ -1120,6 +1120,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -1128,6 +1129,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/0.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 		status = "disabled";
@@ -1143,6 +1145,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.0";
 		reg = <0>;
 		spi-max-frequency = <24000000>;
 	};
@@ -1151,6 +1154,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 		compatible = "spidev";
+		symlink = "spi/1.1";
 		reg = <1>;
 		spi-max-frequency = <24000000>;
 	};
diff --git a/arch/arm/boot/dts/am335x-roboticscape.dtsi b/arch/arm/boot/dts/am335x-roboticscape.dtsi
index 07d436e89970..b01e3f59941d 100644
--- a/arch/arm/boot/dts/am335x-roboticscape.dtsi
+++ b/arch/arm/boot/dts/am335x-roboticscape.dtsi
@@ -419,6 +419,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.0";
 
 		reg = <0>;
 		spi-max-frequency = <16000000>;
@@ -430,6 +431,7 @@
 		#size-cells = <0>;
 
 		compatible = "spidev";
+		symlink = "spi/1.1";
 
 		reg = <1>;
 		spi-max-frequency = <16000000>;
-- 
2.20.1

