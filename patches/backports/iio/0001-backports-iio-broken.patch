From ccdaaa40839b6029c2ff594b0672980abf9886d5 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 29 Mar 2016 15:56:42 -0500
Subject: [PATCH] backports: iio: broken

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/iio/Kconfig          | 1 +
 drivers/iio/accel/Kconfig    | 2 ++
 drivers/iio/adc/Kconfig      | 1 +
 drivers/iio/health/Kconfig   | 2 ++
 4 files changed, 6 insertions(+)

diff --git a/drivers/iio/Kconfig b/drivers/iio/Kconfig
index 505e921..0da9546 100644
--- a/drivers/iio/Kconfig
+++ b/drivers/iio/Kconfig
@@ -49,6 +49,7 @@ config IIO_CONSUMERS_PER_TRIGGER
 config IIO_SW_TRIGGER
 	tristate "Enable software triggers support"
 	select IIO_CONFIGFS
+	depends on BROKEN
 	help
 	 Provides IIO core support for software triggers. A software
 	 trigger can be created via configfs or directly by a driver
diff --git a/drivers/iio/accel/Kconfig b/drivers/iio/accel/Kconfig
index b0d3ecf..c8cb557 100644
--- a/drivers/iio/accel/Kconfig
+++ b/drivers/iio/accel/Kconfig
@@ -24,6 +24,7 @@ config BMC150_ACCEL
 	select REGMAP
 	select BMC150_ACCEL_I2C if I2C
 	select BMC150_ACCEL_SPI if SPI
+	depends on BROKEN
 	help
 	  Say yes here to build support for the following Bosch accelerometers:
 	  BMC150, BMI055, BMA250E, BMA222E, BMA255, BMA280.
@@ -141,6 +142,7 @@ config MMA8452
 	depends on I2C
 	select IIO_BUFFER
 	select IIO_TRIGGERED_BUFFER
+	depends on BROKEN
 	help
 	  Say yes here to build support for the following Freescale 3-axis
 	  accelerometers: MMA8451Q, MMA8452Q, MMA8453Q, MMA8652FC, MMA8653FC.
diff --git a/drivers/iio/adc/Kconfig b/drivers/iio/adc/Kconfig
index af4aea7..ab79b42 100644
--- a/drivers/iio/adc/Kconfig
+++ b/drivers/iio/adc/Kconfig
@@ -330,6 +330,7 @@ config NAU7802
 config PALMAS_GPADC
 	tristate "TI Palmas General Purpose ADC"
 	depends on MFD_PALMAS
+	depends on BROKEN
 	help
 	  Palmas series pmic chip by Texas Instruments (twl6035/6037)
 	  is used in smartphones and tablets and supports a 16 channel
diff --git a/drivers/iio/health/Kconfig b/drivers/iio/health/Kconfig
index c5f004a..96a90fe 100644
--- a/drivers/iio/health/Kconfig
+++ b/drivers/iio/health/Kconfig
@@ -13,6 +13,7 @@ config AFE4403
 	select REGMAP_SPI
 	select IIO_BUFFER
 	select IIO_TRIGGERED_BUFFER
+	depends on BROKEN
 	help
 	  Say yes to choose the Texas Instruments AFE4403
 	  heart rate monitor and low-cost pulse oximeter.
@@ -26,6 +27,7 @@ config AFE4404
 	select REGMAP_I2C
 	select IIO_BUFFER
 	select IIO_TRIGGERED_BUFFER
+	depends on BROKEN
 	help
 	  Say yes to choose the Texas Instruments AFE4404
 	  heart rate monitor and low-cost pulse oximeter.
-- 
2.8.0.rc3

