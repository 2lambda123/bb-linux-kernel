From f1b3ea3e48eb878a6c81b31ef6e1dbc34b7bf123 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 15 Sep 2014 21:31:38 -0500
Subject: [PATCH 15/18] am335x-bone: cape: lcd

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-bone-4dcape-43.dtsi     | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-4dcape-43t.dtsi    | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-4dcape-70.dtsi     | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-4dcape-70t.dtsi    | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-bbb-exp-c.dtsi     | 97 ++++++++++++++++++++++++
 arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi |  7 ++
 arch/arm/boot/dts/am335x-bone-lcd3-01-00a2.dtsi  | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-lcd4-01-00a1.dtsi  | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-lcd7-01-00a2.dtsi  | 31 ++++++++
 arch/arm/boot/dts/am335x-bone-lcd7-01-00a3.dtsi  | 31 ++++++++
 arch/arm/boot/dts/am335x-bone.dts                | 10 +++
 arch/arm/boot/dts/am335x-boneblack.dts           | 26 +++++++
 12 files changed, 388 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-4dcape-43.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-4dcape-43t.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-4dcape-70.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-4dcape-70t.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-bbb-exp-c.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd3-01-00a2.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd4-01-00a1.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd7-01-00a2.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd7-01-00a3.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-4dcape-43.dtsi b/arch/arm/boot/dts/am335x-bone-4dcape-43.dtsi
new file mode 100644
index 0000000..3ef21bc
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-4dcape-43.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+/* #include "am335x-bone-keymap0.dtsi" */
+#include "am335x-bone-keymap1.dtsi"
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+/* #include "am335x-bone-ti-tscadc-4-wire.dtsi" */
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+#include "am335x-bone-panel-480x272.dtsi"
+/* #include "am335x-bone-panel-800x480.dtsi" */
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-4dcape-43t.dtsi b/arch/arm/boot/dts/am335x-bone-4dcape-43t.dtsi
new file mode 100644
index 0000000..bb27434
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-4dcape-43t.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+/* #include "am335x-bone-keymap0.dtsi" */
+#include "am335x-bone-keymap1.dtsi"
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+#include "am335x-bone-panel-480x272.dtsi"
+/* #include "am335x-bone-panel-800x480.dtsi" */
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-4dcape-70.dtsi b/arch/arm/boot/dts/am335x-bone-4dcape-70.dtsi
new file mode 100644
index 0000000..aa30010
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-4dcape-70.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+#include "am335x-bone-keymap0.dtsi"
+/* #include "am335x-bone-keymap1.dtsi" */
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+/* #include "am335x-bone-ti-tscadc-4-wire.dtsi" */
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+/* #include "am335x-bone-panel-480x272.dtsi" */
+#include "am335x-bone-panel-800x480.dtsi"
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-4dcape-70t.dtsi b/arch/arm/boot/dts/am335x-bone-4dcape-70t.dtsi
new file mode 100644
index 0000000..4ce42f3
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-4dcape-70t.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+#include "am335x-bone-keymap0.dtsi"
+/* #include "am335x-bone-keymap1.dtsi" */
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+/* #include "am335x-bone-panel-480x272.dtsi" */
+#include "am335x-bone-panel-800x480.dtsi"
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-bbb-exp-c.dtsi b/arch/arm/boot/dts/am335x-bone-bbb-exp-c.dtsi
new file mode 100644
index 0000000..c17a240
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-bbb-exp-c.dtsi
@@ -0,0 +1,97 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "am335x-bone-ttyO1.dtsi"
+#include "am335x-bone-ttyO2.dtsi"
+#include "am335x-bone-ttyO4.dtsi"
+
+&i2c1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c1_pins>;
+
+	status = "okay";
+	clock-frequency = <400000>;
+
+	edt-ft5306@38 {
+		status = "okay";
+		compatible = "edt,edt-ft5306", "edt,edt-ft5x06";
+		pinctrl-names = "default";
+		pinctrl-0 = <&gpio1_17_pins>;
+
+		reg = <0x38>;
+		interrupt-parent = <&gpio1>;
+		interrupts = <17 0>;
+
+		touchscreen-size-x = <1240>;
+		touchscreen-size-y = <600>;
+	};
+
+	tlv320aic3x: tlv320aic3x@1b {
+		compatible = "ti,tlv320aic3x";
+		reg = <0x1b>;
+		status = "okay";
+	};
+};
+
+&mcasp0 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&mcasp0_pins_audio2>;
+
+	status = "okay";
+
+	op-mode = <0>;          /* MCASP_IIS_MODE */
+	tdm-slots = <2>;
+	num-serializer = <16>;
+	serial-dir = <  /* 0: INACTIVE, 1: TX, 2: RX */
+		1 0 2 0
+		0 0 0 0
+		0 0 0 0
+		0 0 0 0
+	>;
+	tx-num-evt = <1>;
+	rx-num-evt = <1>;
+};
+
+/ {
+	sound {
+		compatible = "ti,da830-evm-audio";
+		ti,model = "DA830 EVM";
+		ti,audio-codec = <&tlv320aic3x>;
+		ti,mcasp-controller = <&mcasp0>;
+		ti,codec-clock-rate = <12000000>;
+		ti,audio-routing =
+			"Headphone Jack",       "HPLOUT",
+			"Headphone Jack",       "HPROUT",
+			"MIC3L",                "Mic Jack",
+			"MIC3R",                "Mic Jack";
+	};
+};
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+/* #include "am335x-bone-led-gpio1-28.dtsi" */
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+#include "am335x-bone-led-gpio2-4-gpio2-5.dtsi"
+
+/* Keypad */
+/* #include "am335x-bone-keymap0.dtsi" */
+/* #include "am335x-bone-keymap1.dtsi" */
+/* #include "am335x-bone-keymap2.dtsi" */
+#include "am335x-bone-keymap3.dtsi"
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+/* #include "am335x-bone-ti-tscadc-4-wire.dtsi" */
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+/* #include "am335x-bone-panel-480x272.dtsi" */
+/* #include "am335x-bone-panel-800x480.dtsi" */
+#include "am335x-bone-panel-1240x600-24bit.dtsi"
diff --git a/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi b/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
index 47cc96d..d74f968 100644
--- a/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
+++ b/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
@@ -33,6 +33,13 @@
 		>;
 	};
 
+	/* bbb-exp-c */
+	gpio1_17_pins: pinmux_gpio1_17_pins {
+		pinctrl-single,pins = <
+			0x044 0x27      /* CAP_TSC gpmc_a1.gpio1_17, INPUT | MODE7 */
+		>;
+	};
+
 	/* lcd4-01-00a0 */
 	gpio1_18_led_pins: pinmux_gpio1_18_led_pins {
 		pinctrl-single,pins = <
diff --git a/arch/arm/boot/dts/am335x-bone-lcd3-01-00a2.dtsi b/arch/arm/boot/dts/am335x-bone-lcd3-01-00a2.dtsi
new file mode 100644
index 0000000..6a7378c
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd3-01-00a2.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+/* #include "am335x-bone-led-gpio1-28.dtsi" */
+#include "am335x-bone-led-gpio3-19.dtsi"
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+#include "am335x-bone-keymap0.dtsi"
+/* #include "am335x-bone-keymap1.dtsi" */
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+#include "am335x-bone-panel-320x240.dtsi"
+/* #include "am335x-bone-panel-480x272.dtsi" */
+/* #include "am335x-bone-panel-800x480.dtsi" */
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-lcd4-01-00a1.dtsi b/arch/arm/boot/dts/am335x-bone-lcd4-01-00a1.dtsi
new file mode 100644
index 0000000..bb27434
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd4-01-00a1.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+/* #include "am335x-bone-keymap0.dtsi" */
+#include "am335x-bone-keymap1.dtsi"
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+#include "am335x-bone-panel-480x272.dtsi"
+/* #include "am335x-bone-panel-800x480.dtsi" */
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-lcd7-01-00a2.dtsi b/arch/arm/boot/dts/am335x-bone-lcd7-01-00a2.dtsi
new file mode 100644
index 0000000..5eb68c3
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd7-01-00a2.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+/* #include "am335x-bone-keymap0.dtsi" */
+/* #include "am335x-bone-keymap1.dtsi" */
+#include "am335x-bone-keymap2.dtsi"
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+/* #include "am335x-bone-panel-480x272.dtsi" */
+#include "am335x-bone-panel-800x480.dtsi"
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone-lcd7-01-00a3.dtsi b/arch/arm/boot/dts/am335x-bone-lcd7-01-00a3.dtsi
new file mode 100644
index 0000000..4ce42f3
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd7-01-00a3.dtsi
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/* Led */
+/* #include "am335x-bone-led-gpio1-18.dtsi" */
+#include "am335x-bone-led-gpio1-28.dtsi"
+/* #include "am335x-bone-led-gpio3-19.dtsi" */
+/* #include "am335x-bone-led-gpio2-4-gpio2-5.dtsi" */
+
+/* Keypad */
+#include "am335x-bone-keymap0.dtsi"
+/* #include "am335x-bone-keymap1.dtsi" */
+/* #include "am335x-bone-keymap2.dtsi" */
+/* #include "am335x-bone-keymap3.dtsi" */
+
+/* Backlight */
+#include "am335x-bone-bl-gpio1-18.dtsi"
+
+/* Touchscreen */
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+
+/* Panel */
+/* #include "am335x-bone-panel-320x240.dtsi" */
+/* #include "am335x-bone-panel-480x272.dtsi" */
+#include "am335x-bone-panel-800x480.dtsi"
+/* #include "am335x-bone-panel-1240x600-24bit.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index 95d7ab9..126880f 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -50,3 +50,13 @@
 /* http://elinux.org/CircuitCo:Audio_Cape_RevB */
 /* Pins: P9.24, P9.28, P9.29, P9.31, P9.30 */
 /* #include "am335x-bone-audio.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD3 */
+/* #include "am335x-bone-lcd3-01-00a2.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD4 */
+/* #include "am335x-bone-lcd4-01-00a1.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD7 */
+/* #include "am335x-bone-lcd7-01-00a2.dtsi" */
+/* #include "am335x-bone-lcd7-01-00a3.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index 0fa2d76..4f0b36e 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -45,6 +45,32 @@
 /* #include "am335x-bone-ttyO5.dtsi" */
 
 /* Capes */
+/* http://elinux.org/4D_4.3_LCD_CAPE */
+/* 4DCAPE-43 (Non Touch version): */
+/* #include "am335x-bone-4dcape-43.dtsi" */
+/* 4DCAPE-43T (Resistive Touch version): */
+/* #include "am335x-bone-4dcape-43t.dtsi" */
+
+/* http://www.4dsystems.com.au/product/4DCAPE_70T/ */
+/* 4DCAPE-70 (Non Touch version): */
+/* #include "am335x-bone-4dcape-70.dtsi" */
+/* 4DCAPE-70T (Resistive Touch version): */
+/* #include "am335x-bone-4dcape-70t.dtsi" */
+
 /* http://elinux.org/CircuitCo:Audio_Cape_RevB */
 /* Pins: P9.24, P9.28, P9.29, P9.31, P9.30 */
 /* #include "am335x-bone-audio.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD3 */
+/* #include "am335x-bone-lcd3-01-00a2.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD4 */
+/* #include "am335x-bone-lcd4-01-00a1.dtsi" */
+
+/* http://elinux.org/CircuitCo:BeagleBone_LCD7 */
+/* am335x-boneblack: emmc has to be disabled for lcd7-01-00a2 */
+/* #include "am335x-bone-lcd7-01-00a2.dtsi" */
+/* #include "am335x-bone-lcd7-01-00a3.dtsi" */
+
+/* http://www.chipsee.com/product/evm/beagle/beaglebone-black-expansion-capacitive.html */
+/* #include "am335x-bone-bbb-exp-c.dtsi" */
-- 
2.1.0

