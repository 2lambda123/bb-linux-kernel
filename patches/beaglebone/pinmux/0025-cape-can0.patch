From e398bcab04a04e72908389c48426245a585a56ef Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Fri, 5 Dec 2014 09:50:51 -0600
Subject: [PATCH 25/25] cape: can0

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-bone-can0.dtsi | 18 ++++++++++++++++++
 arch/arm/boot/dts/am335x-bone.dts       |  6 ++++++
 arch/arm/boot/dts/am335x-boneblack.dts  |  6 ++++++
 arch/arm/boot/dts/am335x-can0.dtsi      | 14 ++++++++++++++
 4 files changed, 44 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-can0.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-can0.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-can0.dtsi b/arch/arm/boot/dts/am335x-bone-can0.dtsi
new file mode 100644
index 0000000..a215e52
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-can0.dtsi
@@ -0,0 +1,18 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "am335x-can0.dtsi"
+
+&ocp {
+	P9_19_pinmux {
+		mode = "can";
+	};
+	P9_20_pinmux {
+		mode = "can";
+	};
+};
diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index 86f1e1d..5ad225d 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -45,6 +45,12 @@
 	status = "okay";
 };
 
+/* can0: P9.19, P9.20: disable: i2c2: cape eeprom */
+/* can0: peripheral */
+#include "am335x-can0.dtsi"
+/* can0: pinmux */
+/* #include "am335x-bone-can0.dtsi" */
+
 /* can1: P9_24, P9_26 */
 #include "am335x-can1.dtsi"
 /* #include "am335x-bone-can1.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index 5614aa4..e53fa04 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -43,6 +43,12 @@
 /* HDMI: without audio */
 /* #include "am335x-boneblack-nxp-hdmi-no-audio.dtsi" */
 
+/* can0: P9.19, P9.20: disable: i2c2: cape eeprom */
+/* can0: peripheral */
+#include "am335x-can0.dtsi"
+/* can0: pinmux */
+/* #include "am335x-bone-can0.dtsi" */
+
 /* can1: P9_24, P9_26 */
 #include "am335x-can1.dtsi"
 /* #include "am335x-bone-can1.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-can0.dtsi b/arch/arm/boot/dts/am335x-can0.dtsi
new file mode 100644
index 0000000..f3cff11
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-can0.dtsi
@@ -0,0 +1,14 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&dcan0 {
+	pinctrl-names = "default";
+	pinctrl-0 = <>;
+
+	status = "okay";
+};
-- 
2.1.3

